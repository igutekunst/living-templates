---
schema_version: "1.0"
node_type: template
template_engine: jinja2
inputs:
  app_name:
    type: string
    description: "Application name"
    required: true
  data_summary:
    type: object
    source: "@data-processor.summary"
    description: "Summary from data processing node"
  log_alerts:
    type: array
    source: "@log-monitor.alerts"
    description: "Recent log alerts"
outputs:
  - status_report.md
dependencies:
  - "@data-processor.summary"
  - "@log-monitor.alerts"
---
# {{ app_name }} Status Report

Generated: {{ now() }}

## Data Processing Summary

{% if data_summary %}
- Total records: {{ data_summary.total_records }}
- Processed records: {{ data_summary.processed_records }}
- Filter rate: {{ data_summary.filter_rate }}%
- Last processed: {{ data_summary.last_processed }}
{% else %}
*No data processing summary available*
{% endif %}

## Recent Alerts

{% if log_alerts and log_alerts|length > 0 %}
Found {{ log_alerts|length }} recent alerts:

{% for alert in log_alerts %}
- **{{ alert.level }}**: {{ alert.message }} ({{ alert.timestamp }})
{% endfor %}
{% else %}
*No recent alerts*
{% endif %}

## System Status

{% if data_summary and log_alerts %}
{% set alert_count = log_alerts|length %}
{% if alert_count == 0 %}
âœ… **HEALTHY** - No alerts, data processing running normally
{% elif alert_count < 5 %}
âš ï¸ **WARNING** - {{ alert_count }} alerts detected
{% else %}
ðŸš¨ **CRITICAL** - {{ alert_count }} alerts detected, immediate attention required
{% endif %}
{% else %}
â“ **UNKNOWN** - Insufficient data to determine status
{% endif %}

---
*Report generated by Living Templates* 